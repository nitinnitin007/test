<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_Quote_Currency</name>
        <label>Assign Quote Currency</label>
        <locationX>314</locationX>
        <locationY>1439</locationY>
        <assignmentItems>
            <assignToReference>oppcurrencycode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CurrencyIsoCode</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_Quote_is_Renewal</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_renewal_quote_values_from_original</name>
        <label>Assign renewal quote values from original</label>
        <locationX>182</locationX>
        <locationY>1739</locationY>
        <assignmentItems>
            <assignToReference>BillingFreqfromOrgQuote</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Quote__r.SBQQ__BillingFrequency__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentTermsfromOrgQuote</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Order__r.SBQQ__PaymentTerm__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MasterContractTermsfromOrgQuote</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Quote__r.Contract_Master_Terms__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>InvoicingContactFromOrgQuote</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Quote__r.Invoicing_Contact__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SoftwareDeliveryContactfromOrgQuote</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Quote__r.Software_Delivery_Contact__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Proforma_Invoice_record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Account_Currency</name>
        <label>Update Account Currency</label>
        <locationX>50</locationX>
        <locationY>1439</locationY>
        <assignmentItems>
            <assignToReference>oppcurrencycode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Account__r.CurrencyIsoCode</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_Quote_is_Renewal</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Opp_currency</name>
        <label>Update Opp currency</label>
        <locationX>578</locationX>
        <locationY>1439</locationY>
        <assignmentItems>
            <assignToReference>oppcurrencycode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.CurrencyIsoCode</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_Quote_is_Renewal</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Approval_field_changes_to_update_approval_level</name>
        <label>Approval field changes to update approval level</label>
        <locationX>314</locationX>
        <locationY>1031</locationY>
        <defaultConnector>
            <targetReference>If_Account_currency</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Approval_fields_are_changed</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Initial_Term_Discount__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Additional_Free_months_at_no_cost__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__BillingFrequency__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Software_Payment_Terms__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Min_year_on_year_committed_spend__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SFA_Cap__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Implementation_Services_Discount__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_approver_name</targetReference>
            </connector>
            <label>Approval fields are changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Quote_is_Renewal</name>
        <label>Check if Quote is Renewal</label>
        <locationX>314</locationX>
        <locationY>1631</locationY>
        <defaultConnector>
            <targetReference>Update_Quote_Name</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Renewal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Renewal</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IfQuoteNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_renewal_quote_values_from_original</targetReference>
            </connector>
            <label>Renewal</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_status_of_quote_is_pricing_and_proposal</name>
        <label>Check if status of quote is pricing and proposal</label>
        <locationX>314</locationX>
        <locationY>731</locationY>
        <defaultConnector>
            <targetReference>Approval_field_changes_to_update_approval_level</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Stage_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pricing Proposal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Quote</targetReference>
            </connector>
            <label>Stage check</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Account_currency</name>
        <label>If Account currency</label>
        <locationX>314</locationX>
        <locationY>1331</locationY>
        <defaultConnector>
            <targetReference>Update_Opp_currency</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Account_currency</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Account__r.CurrencyIsoCode</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_Currency</targetReference>
            </connector>
            <label>Check Account currency</label>
        </rules>
        <rules>
            <name>Quote_Currency_is_present</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Quote_Currency</targetReference>
            </connector>
            <label>Quote Currency is  present</label>
        </rules>
    </decisions>
    <decisions>
        <name>Sales_Segment</name>
        <label>Sales Segment</label>
        <locationX>314</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Check_if_status_of_quote_is_pricing_and_proposal</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sales_Segment_Update</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OP4I_Sales_Segment__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>fxisNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Approver_Matrix</targetReference>
            </connector>
            <label>Sales Segment Update</label>
        </rules>
    </decisions>
    <description>Modified as part of BIZ-46894.Updated the flow with the modified version
Mereged approval level Flow in one flow
Reverting the OP4I sales segment to Account
Mapping the new approver to quote and updating the service implementation formula</description>
    <environments>Default</environments>
    <formulas>
        <description>To populated the value of billing frequency when Billing frequency approval level is highest</description>
        <name>Approverbillingfrequency</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.Billing_Frequency_approval_level__c}),&quot;Software Billing frequency (1st year)&quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>To populated the value of Additional free month when Additional free month approval level is highest</description>
        <name>Approverfreemonth</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.Free_month_approver_Level__c}),&quot;Additional Free months at no cost , &quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>when minimum year is max level</description>
        <name>Approverminimumyear</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.Minimum_year_approver_level__c}),&quot;Min year on year committed spend , &quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>when payments term value has highest approver</description>
        <name>ApproverPaymentterm</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.Payment_Term_Approver_Level__c}),&quot;Payment Terms , &quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>New Record</description>
        <name>fxisNew</name>
        <dataType>Boolean</dataType>
        <expression>IF(ISNEW(), True, False)</expression>
    </formulas>
    <formulas>
        <name>Highestapprovallevel</name>
        <dataType>Number</dataType>
        <expression>MAX({!$Record.InitialTermapproverLevel__c},{!$Record.Free_month_approver_Level__c},{!$Record.Payment_Term_Approver_Level__c},{!$Record.Billing_Frequency_approval_level__c},{!$Record.Minimum_year_approver_level__c},{!$Record.SFA_Level__c},{!$Record.Minimum_year_approver_level__c},{!$Record.Implementationdiscountlevel__c})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <description>when initial term discount value has highest approval level</description>
        <name>HighestapprovernameInitialtermdiscount</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.InitialTermapproverLevel__c}), &quot;Initial Term Discount ,&quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>IfQuoteNew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>Implementationapprovername</name>
        <dataType>String</dataType>
        <expression>IF(({!$Record.Highest_Approver_level__c} = {!$Record.Implementationdiscountlevel__c}),&quot;Implementation Services Discount, &quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>IsNew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <description>Formula field to update the status value</description>
        <name>Pricingproposalfieldupdateformula</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!$Record.ApprovalStatus__c},&quot;Pending&quot;),&quot;In Progress&quot; ,IF(ISPICKVAL({!$Record.ApprovalStatus__c},&quot;Approved&quot;),&quot;Approved&quot;,IF(ISPICKVAL({!$Record.ApprovalStatus__c},&quot;Rejected&quot;),&quot;Rejected&quot;,&quot;Pending submission&quot;)))</expression>
    </formulas>
    <formulas>
        <name>SegmentleadNAwest</name>
        <dataType>String</dataType>
        <expression>IF({!$Record.OP4I_Sales_Segment__c = &quot;01 - Legal NA West&quot;}, {!DonnaBailey}, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>Formula field to calculate the highest level of approver based on the value of Implementation Discount field value
0 - No Approver
1 - Sales Segment
2. - Industry sales Lead
3 - CRO
5 -  SVP, Services</description>
        <name>Service_ImplementationDiscountLevel</name>
        <dataType>Number</dataType>
        <expression>IF((({!$Record.Implementation_Services_Discount__c}) = 0)&amp;&amp; (({!$Record.Retainer_percentage_editable__c}) = 50) , 0, 
IF(({!$Record.Implementation_Services_Discount__c}) &lt; 10, 1,IF((({!$Record.Implementation_Services_Discount__c}) &gt;=10) &amp;&amp; (({!$Record.Implementation_Services_Discount__c})&lt;=20) , 3,IF((({!$Record.Implementation_Services_Discount__c}) &gt;20) || (({!$Record.Retainer_percentage_editable__c})&lt; 50),4,5))))</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>SetQuoteExpirationDate</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 30</expression>
    </formulas>
    <formulas>
        <name>SFAlevel</name>
        <dataType>Number</dataType>
        <expression>IF(OR(ISPICKVAL({!$Record.SFA_Prefix__c},&quot;&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c}=0)),0,
IF(OR(ISPICKVAL({!$Record.SFA_Prefix__c},&quot;CPI&quot;),ISPICKVAL({!$Record.SFA_Prefix__c},&quot;RPI&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c}&lt;=10)),2,
IF(OR(ISPICKVAL({!$Record.SFA_Cap_Time_Horizon__c},&quot;1st renewal only&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c}&lt;= 5)&amp;&amp; ISPICKVAL({!$Record.SFA_Prefix__c},&quot;&quot;)),3,
IF(OR(ISPICKVAL({!$Record.SFA_Cap_Time_Horizon__c},&quot;Thru 2nd renewal&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c} &lt;= 10)&amp;&amp; ISPICKVAL({!$Record.SFA_Prefix__c},&quot;&quot;)),3,
IF(OR(ISPICKVAL({!$Record.SFA_Cap_Time_Horizon__c},&quot;Thru 3rd Renewal&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c} &lt;= 5)&amp;&amp; (ISPICKVAL({!$Record.SFA_Prefix__c},&quot;&quot;)||(ISPICKVAL({!$Record.SFA_Prefix__c},&quot;Greater of CPI/RPI&quot;)))),3,
IF(OR(ISPICKVAL({!$Record.SFA_Cap_Time_Horizon__c},&quot;Perpetual&quot;)) &amp;&amp; (({!$Record.SFA_suffix_number__c}&lt;= 5)&amp;&amp; (ISPICKVAL({!$Record.SFA_Prefix__c},&quot;&quot;)||(ISPICKVAL({!$Record.SFA_Prefix__c},&quot;Greater of CPI/RPI&quot;)))),4,0))))))</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>Quote - After Insert And Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Quote - After Insert And Update</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Proforma_Invoice_record</name>
        <label>Create Proforma Invoice record</label>
        <locationX>182</locationX>
        <locationY>1847</locationY>
        <connector>
            <targetReference>Update_Renewal_Quote</targetReference>
        </connector>
        <inputAssignments>
            <field>Renewal_Quote__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Renewal_Start_Date__c</field>
            <value>
                <elementReference>$Record.SBQQ__StartDate__c</elementReference>
            </value>
        </inputAssignments>
        <object>Proforma_Invoice__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_Approver_Matrix</name>
        <label>Get Approver  Matrix</label>
        <locationX>182</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Approvers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sales_Segment__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SBQQ__Account__r.OP4I_Sales_Segment__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Quote</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Approvers_Matrix__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_approver_name</name>
        <label>Update approver name and Level</label>
        <locationX>182</locationX>
        <locationY>1139</locationY>
        <connector>
            <targetReference>If_Account_currency</targetReference>
        </connector>
        <inputAssignments>
            <field>Approval_Level_Name__c</field>
            <value>
                <elementReference>Highestapproverfieldname</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Approval_Level__c</field>
            <value>
                <elementReference>Highestapprovallevel</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Exceptional_Approver__c</field>
            <value>
                <elementReference>Highestapproverfieldname</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Implementationdiscountlevel__c</field>
            <value>
                <elementReference>Service_ImplementationDiscountLevel</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SFA_Level_Update__c</field>
            <value>
                <elementReference>SFAlevel</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Approvers</name>
        <label>Update Approvers</label>
        <locationX>182</locationX>
        <locationY>539</locationY>
        <connector>
            <targetReference>Check_if_status_of_quote_is_pricing_and_proposal</targetReference>
        </connector>
        <inputAssignments>
            <field>COO__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.COO_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CRO__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.CRO_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Industry_President__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.Industry_President_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Industry_Sales_Lead__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.Industry_Sales_Lead_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OP4I_Sales_Segment__c</field>
            <value>
                <elementReference>$Record.SBQQ__Account__r.OP4I_Sales_Segment__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SVP_Finance__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.SVP_Finance__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SVP_Services__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.SVP_Services_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Segment_Lead__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.Sales_Segment_Lead_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Services_Segment_Lead__c</field>
            <value>
                <elementReference>Get_Approver_Matrix.Services_Segment_Lead_Approver__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Quote</name>
        <label>Update Quote</label>
        <locationX>182</locationX>
        <locationY>839</locationY>
        <connector>
            <targetReference>Approval_field_changes_to_update_approval_level</targetReference>
        </connector>
        <inputAssignments>
            <field>Pricing_Proposal_Approval__c</field>
            <value>
                <elementReference>Pricingproposalfieldupdateformula</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Quote_Line_s_Proforma_Invoice</name>
        <label>Update Quote Line&apos;s Proforma Invoice</label>
        <locationX>182</locationX>
        <locationY>2063</locationY>
        <connector>
            <targetReference>Update_Quote_Name</targetReference>
        </connector>
        <inputAssignments>
            <field>Proforma_Invoice_Renewal_Quote__c</field>
            <value>
                <elementReference>Create_Proforma_Invoice_record</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.SBQQ__LineItems__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Quote_Name</name>
        <label>Update Quote Name</label>
        <locationX>314</locationX>
        <locationY>2255</locationY>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>oppcurrencycode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__ExpirationDate__c</field>
            <value>
                <elementReference>SetQuoteExpirationDate</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Renewal_Quote</name>
        <label>Update Renewal Quote</label>
        <locationX>182</locationX>
        <locationY>1955</locationY>
        <connector>
            <targetReference>Update_Quote_Line_s_Proforma_Invoice</targetReference>
        </connector>
        <inputAssignments>
            <field>Contract_Master_Terms__c</field>
            <value>
                <elementReference>MasterContractTermsfromOrgQuote</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Invoicing_Contact__c</field>
            <value>
                <elementReference>InvoicingContactFromOrgQuote</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__BillingCountry__c</field>
            <value>
                <elementReference>BillingFreqfromOrgQuote</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__OriginalQuote__c</field>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.SBQQ__RenewedContract__r.SBQQ__Quote__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__PaymentTerms__c</field>
            <value>
                <elementReference>PaymentTermsfromOrgQuote</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Software_Delivery_Contact__c</field>
            <value>
                <elementReference>SoftwareDeliveryContactfromOrgQuote</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>188</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Sales_Segment</targetReference>
        </connector>
        <object>SBQQ__Quote__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <textTemplates>
        <name>DonnaBailey</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>0052J000008gH70QAE</text>
    </textTemplates>
    <textTemplates>
        <name>Highestapproverfieldname</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>{!HighestapprovernameInitialtermdiscount}  
{!Approverfreemonth}  
{!ApproverPaymentterm} 
{!Approverbillingfrequency} 
{!Approverminimumyear}
{!Implementationapprovername}</text>
    </textTemplates>
    <variables>
        <name>BillingFreqfromOrgQuote</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>InvoicingContactFromOrgQuote</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MasterContractTermsfromOrgQuote</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>oppcurrencycode</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>PaymentTermsfromOrgQuote</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Salessegment</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SoftwareDeliveryContactfromOrgQuote</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
