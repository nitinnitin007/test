<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>Account_Notes</name>
        <label>Account Notes</label>
        <locationX>402</locationX>
        <locationY>3935</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account_Notes__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Account__r.Notes__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Roox_pmt_terms</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Approval_Status_Approved</name>
        <label>Approval Status Approved</label>
        <locationX>534</locationX>
        <locationY>8867</locationY>
        <assignmentItems>
            <assignToReference>$Record.SBQQ__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Review</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Approval_Status_Pending</name>
        <label>Approval Status Pending</label>
        <locationX>270</locationX>
        <locationY>8867</locationY>
        <assignmentItems>
            <assignToReference>$Record.SBQQ__Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>OSA Requested</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Deal_type</name>
        <label>Assign Deal type</label>
        <locationX>270</locationX>
        <locationY>695</locationY>
        <assignmentItems>
            <assignToReference>$Record.Deal_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Renewal</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Quote_stage_is_Changes</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>collect_all_products_master</name>
        <label>collect all products master</label>
        <locationX>754</locationX>
        <locationY>7859</locationY>
        <assignmentItems>
            <assignToReference>collectionofallproducts</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>collectionofquotelinesloop.Item_Master_Number__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>collectionofquotelinesloop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Collect_meter_types</name>
        <label>Collect meter types</label>
        <locationX>622</locationX>
        <locationY>7667</locationY>
        <assignmentItems>
            <assignToReference>Collection_of_Meter_Type</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>collectionofquotelinesloop.Meter_Type__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>collect_all_products_master</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CollectedText1</name>
        <label>CollectedText1</label>
        <locationX>534</locationX>
        <locationY>8351</locationY>
        <assignmentItems>
            <assignToReference>$Record.Meter_type_quote_line__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Collection_of_Meter_Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.master_product_pins_from_all_quote_lines__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>collectionofallproducts</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>if_DB_exclude</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Deal_type</name>
        <label>Assign Deal type</label>
        <locationX>534</locationX>
        <locationY>695</locationY>
        <assignmentItems>
            <assignToReference>$Record.Deal_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Add-On</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Quote_stage_is_Changes</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Default_template_as_bundle</name>
        <label>Default template as bundle</label>
        <locationX>402</locationX>
        <locationY>5843</locationY>
        <assignmentItems>
            <assignToReference>$Record.SBQQ__DefaultTemplate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_PS_Bundle_PDF_template.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_PS_Standard_PDF_template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Default_template_as_standard</name>
        <label>Default template as standard</label>
        <locationX>402</locationX>
        <locationY>6251</locationY>
        <assignmentItems>
            <assignToReference>$Record.SBQQ__DefaultTemplate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_PS_Standard_PDF_template.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>iis</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>iis_true</name>
        <label>iis true</label>
        <locationX>402</locationX>
        <locationY>6551</locationY>
        <assignmentItems>
            <assignToReference>$Record.IIS_quote_line_added__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>isVersionChange</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>New_layout</name>
        <label>New layout</label>
        <locationX>402</locationX>
        <locationY>4535</locationY>
        <assignmentItems>
            <assignToReference>$Record.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>0122J000000kyoKQAQ</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Old_page_layout</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>old_layout</name>
        <label>old layout</label>
        <locationX>402</locationX>
        <locationY>4835</locationY>
        <assignmentItems>
            <assignToReference>$Record.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>0122J000000kyoPQAQ</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Price_book_rule_field</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>populate_Roox_pmt_term</name>
        <label>populate Roox pmt term</label>
        <locationX>402</locationX>
        <locationY>4235</locationY>
        <assignmentItems>
            <assignToReference>$Record.Software_Payment_Terms__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Roox</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>New_page_layout</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>QuoteDateChange</name>
        <label>QuoteDateChange</label>
        <locationX>402</locationX>
        <locationY>6851</locationY>
        <assignmentItems>
            <assignToReference>$Record.Quote_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>X094Fxxx_Condion</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Special_case</name>
        <label>Special_case</label>
        <locationX>402</locationX>
        <locationY>8567</locationY>
        <assignmentItems>
            <assignToReference>$Record.Special_case__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>exclude term QT-2183</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Quote_sent_for_approval</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Uncheck_Termination_With_Cancellation_Fee_Checkbox</name>
        <label>Uncheck Termination With Cancellation Fee Checkbox</label>
        <locationX>402</locationX>
        <locationY>1703</locationY>
        <assignmentItems>
            <assignToReference>$Record.Termination_with_Cancellation_Fee__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_certain_fields_are_updated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Addresses_on_Quote</name>
        <label>Update Addresses on Quote</label>
        <locationX>402</locationX>
        <locationY>2219</locationY>
        <assignmentItems>
            <assignToReference>$Record.Bill_To_Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Required_Billing_Address.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Ship_To_Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Required_Shipping_Address.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Quote_Stage</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_approval_status</name>
        <label>Update approval status</label>
        <locationX>402</locationX>
        <locationY>995</locationY>
        <assignmentItems>
            <assignToReference>$Record.ApprovalStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending Submission</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Quote_RT_is_changes</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_billing_frequency_level</name>
        <label>Update billing frequency level</label>
        <locationX>402</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.Combined_billing_frequency_level__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Biliingfrequencyformula</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Combinepaymentterm__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>combinedpaymenttermformula</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Quote_Type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Boomi</name>
        <label>Update Boomi</label>
        <locationX>622</locationX>
        <locationY>8159</locationY>
        <assignmentItems>
            <assignToReference>$Record.boomi__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>none</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CollectedText1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UPDATE_new_OSA</name>
        <label>UPDATE new OSA</label>
        <locationX>402</locationX>
        <locationY>5435</locationY>
        <assignmentItems>
            <assignToReference>$Record.SBQQ__MasterContract__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__r.Associated_Contract_OSA__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_PS_Bundle_PDF_template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Price_book_rule</name>
        <label>Update Price book rule field</label>
        <locationX>402</locationX>
        <locationY>5135</locationY>
        <assignmentItems>
            <assignToReference>$Record.Price_book_rule__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_2_myRule_28_A1_5917703120</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Populate_new_OSA_if_opportunity_is_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Quote</name>
        <label>Update Quote</label>
        <locationX>50</locationX>
        <locationY>2735</locationY>
        <assignmentItems>
            <assignToReference>$Record.Ramping_Users__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getBillingLookUpData</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Quote1</name>
        <label>Update Quote</label>
        <locationX>314</locationX>
        <locationY>2735</locationY>
        <assignmentItems>
            <assignToReference>$Record.Ramping_Users__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getBillingLookUpData</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Quote_Record_Type</name>
        <label>Update Quote Record Type</label>
        <locationX>270</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>$Record.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Approved_Quote_record_type.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>If_Termination_With_Cancellation_Fee_Checked</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Quote_Record_Type_to_Draft</name>
        <label>Update Quote Record Type to Draft</label>
        <locationX>534</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>$Record.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Draft_Quote_record_type.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>If_Termination_With_Cancellation_Fee_Checked</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>updateBillingRestriction</name>
        <label>updateBillingRestriction</label>
        <locationX>270</locationX>
        <locationY>3227</locationY>
        <assignmentItems>
            <assignToReference>$Record.Billing_Restriction__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getBillingLookUpData.SBQQ__Value__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getShippingLookUpData</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>updateBillingRestrictionBlank</name>
        <label>updateBillingRestrictionBlank</label>
        <locationX>534</locationX>
        <locationY>3227</locationY>
        <assignmentItems>
            <assignToReference>$Record.Billing_Restriction__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>getShippingLookUpData</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>updateShippingRestriction</name>
        <label>updateShippingRestriction</label>
        <locationX>270</locationX>
        <locationY>3635</locationY>
        <assignmentItems>
            <assignToReference>$Record.Shipping_Restriction__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getShippingLookUpData.SBQQ__Value__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AccountIdNotNull</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>updateShippingRestrictionBlank</name>
        <label>updateShippingRestrictionBlank</label>
        <locationX>534</locationX>
        <locationY>3635</locationY>
        <assignmentItems>
            <assignToReference>$Record.Shipping_Restriction__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>AccountIdNotNull</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>AccountIdNotNull</name>
        <label>AccountIdNotNull</label>
        <locationX>534</locationX>
        <locationY>3827</locationY>
        <defaultConnector>
            <targetReference>Roox_pmt_terms</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AccountIdNotnulll</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Account__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Account_Notes</targetReference>
            </connector>
            <label>AccountIdNotnulll</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check wether it is required to update quote or not.</description>
        <name>Check_for_updating_Quote</name>
        <label>Check for updating Quote</label>
        <locationX>314</locationX>
        <locationY>2627</locationY>
        <defaultConnector>
            <targetReference>getBillingLookUpData</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Ramping_Users_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Quote_Lines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Quote</targetReference>
            </connector>
            <label>Ramping Users True</label>
        </rules>
        <rules>
            <name>Ramping_Users_False</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Quote_Lines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Quote1</targetReference>
            </connector>
            <label>Ramping Users False</label>
        </rules>
    </decisions>
    <decisions>
        <description>Is there a need to update Billing or Shipping Address or not .</description>
        <name>Check_if_certain_fields_are_updated</name>
        <label>Check if certain fields are updated</label>
        <locationX>534</locationX>
        <locationY>1895</locationY>
        <defaultConnector>
            <targetReference>Check_Quote_Stage</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Update_Billing_and_Shipping_Address</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Isnew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Bill_To_Account__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Ship_To_Account__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Required_Billing_Address</targetReference>
            </connector>
            <label>Update Billing and Shipping Address</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check the stage of the quote</description>
        <name>Check_Quote_Stage</name>
        <label>Check Quote Stage</label>
        <locationX>534</locationX>
        <locationY>2411</locationY>
        <defaultConnector>
            <targetReference>getBillingLookUpData</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Stage_Contracted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Contract Executed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Quote_Lines</targetReference>
            </connector>
            <label>Stage Contracted</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Quote_Type</name>
        <label>Check Quote Type</label>
        <locationX>534</locationX>
        <locationY>587</locationY>
        <defaultConnector>
            <targetReference>Quote_stage_is_Changes</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Renewal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Renewal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Deal_type</targetReference>
            </connector>
            <label>Renewal</label>
        </rules>
        <rules>
            <name>Amendment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Amendment</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Deal_type</targetReference>
            </connector>
            <label>Amendment</label>
        </rules>
    </decisions>
    <decisions>
        <name>checkBillingLookUPValue</name>
        <label>checkBillingLookUPValue</label>
        <locationX>534</locationX>
        <locationY>3119</locationY>
        <defaultConnector>
            <targetReference>getShippingLookUpData</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>BillingRestriction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getBillingLookUpData</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>updateBillingRestriction</targetReference>
            </connector>
            <label>BillingRestriction</label>
        </rules>
        <rules>
            <name>NotBillingRestriction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getBillingLookUpData</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Billing_Restriction__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>updateBillingRestrictionBlank</targetReference>
            </connector>
            <label>NotBillingRestriction</label>
        </rules>
    </decisions>
    <decisions>
        <name>checkShippingLookUPValue</name>
        <label>checkShippingLookUPValue</label>
        <locationX>534</locationX>
        <locationY>3527</locationY>
        <defaultConnector>
            <targetReference>AccountIdNotNull</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ShippingRestriction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getShippingLookUpData</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>updateShippingRestriction</targetReference>
            </connector>
            <label>ShippingRestriction</label>
        </rules>
        <rules>
            <name>NotShippingRestriction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Shipping_Restriction__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getShippingLookUpData</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>updateShippingRestrictionBlank</targetReference>
            </connector>
            <label>NotShippingRestriction</label>
        </rules>
    </decisions>
    <decisions>
        <name>if_already_collected_value</name>
        <label>if already collected value</label>
        <locationX>754</locationX>
        <locationY>7559</locationY>
        <defaultConnector>
            <targetReference>collect_all_products_master</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>collected</name>
            <conditionLogic>NOT(1)</conditionLogic>
            <conditions>
                <leftValueReference>Collection_of_Meter_Type</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>collectionofquotelinesloop.Meter_Type__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Collect_meter_types</targetReference>
            </connector>
            <label>collected</label>
        </rules>
    </decisions>
    <decisions>
        <name>if_DB_exclude</name>
        <label>if DB exclude</label>
        <locationX>534</locationX>
        <locationY>8459</locationY>
        <defaultConnector>
            <targetReference>Is_Quote_sent_for_approval</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>dB_yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>collectionofallproducts</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>TP-01572</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>collectionofallproducts</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>TP-01571</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Special_case</targetReference>
            </connector>
            <label>dB yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Termination_With_Cancellation_Fee_Checked</name>
        <label>If Termination With Cancellation Fee Checked</label>
        <locationX>534</locationX>
        <locationY>1595</locationY>
        <defaultConnector>
            <targetReference>Check_if_certain_fields_are_updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Termination_With_Cancellation_Fee_Checked</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Termination_with_Cancellation_Fee__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ROR__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Uncheck_Termination_With_Cancellation_Fee_Checkbox</targetReference>
            </connector>
            <label>Termination With Cancellation Fee Checked</label>
        </rules>
    </decisions>
    <decisions>
        <name>iis</name>
        <label>iis</label>
        <locationX>534</locationX>
        <locationY>6443</locationY>
        <defaultConnector>
            <targetReference>isVersionChange</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>iisUpdate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IIS_quote_line_added__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.counter_fo_allert__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.counter_fo_allert__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>iis_true</targetReference>
            </connector>
            <label>iisUpdate</label>
        </rules>
    </decisions>
    <decisions>
        <name>IIS_include</name>
        <label>IIS_include</label>
        <locationX>534</locationX>
        <locationY>8051</locationY>
        <defaultConnector>
            <targetReference>Update_Boomi</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IIS1</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>collectionofallproducts</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>IS-01600</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>collectionofallproducts</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>IS-01601</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>collectionofallproducts</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>IS-01602</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CollectedText1</targetReference>
            </connector>
            <label>IIS1</label>
        </rules>
    </decisions>
    <decisions>
        <description>Code correction</description>
        <name>Is_Quote_sent_for_approval</name>
        <label>Is Quote sent for approval</label>
        <locationX>534</locationX>
        <locationY>8759</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Approval_Status_Pending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Finalize OSA</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approval_Status_Pending</targetReference>
            </connector>
            <label>Is Approval Status Pending</label>
        </rules>
        <rules>
            <name>Is_Approval_Status_Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Finalize OSA</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approval_Status_Approved</targetReference>
            </connector>
            <label>Is Approval Status Approved</label>
        </rules>
    </decisions>
    <decisions>
        <name>isVersionChange</name>
        <label>isVersionChange</label>
        <locationX>534</locationX>
        <locationY>6743</locationY>
        <defaultConnector>
            <targetReference>X094Fxxx_Condion</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>VerChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>VersionChange</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>QuoteDateChange</targetReference>
            </connector>
            <label>VerChange</label>
        </rules>
    </decisions>
    <decisions>
        <name>New_page_layout</name>
        <label>New page layout</label>
        <locationX>534</locationX>
        <locationY>4427</locationY>
        <defaultConnector>
            <targetReference>Old_page_layout</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FALSE_New page layout</defaultConnectorLabel>
        <rules>
            <name>TRUE_New_page_layout</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.New_vs_Old_Payment_Term__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.New_vs_Old_Payment_Term__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New Payment Terms</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>New_layout</targetReference>
            </connector>
            <label>TRUE_New page layout</label>
        </rules>
    </decisions>
    <decisions>
        <name>Old_page_layout</name>
        <label>Old page layout</label>
        <locationX>534</locationX>
        <locationY>4727</locationY>
        <defaultConnector>
            <targetReference>Update_Price_book_rule_field</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FALSE_Old page layout</defaultConnectorLabel>
        <rules>
            <name>TRUE_Old_page_layout</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.New_vs_Old_Payment_Term__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.New_vs_Old_Payment_Term__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>old_layout</targetReference>
            </connector>
            <label>TRUE_Old page layout</label>
        </rules>
    </decisions>
    <decisions>
        <name>Populate_new_OSA_if_opportunity_is_changed</name>
        <label>Populate new OSA if opportunity is changed</label>
        <locationX>534</locationX>
        <locationY>5327</locationY>
        <defaultConnector>
            <targetReference>Get_PS_Bundle_PDF_template</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FALSE_Populate new OSA if opportunity is changed</defaultConnectorLabel>
        <rules>
            <name>TRUE_Populate_new_OSA_if_opportunity_is_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>formula_TRUE_myRule_41</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UPDATE_new_OSA</targetReference>
            </connector>
            <label>TRUE_Populate new OSA if opportunity is changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Populate_Template_with_bundle</name>
        <label>Populate Template with bundle</label>
        <locationX>534</locationX>
        <locationY>5735</locationY>
        <defaultConnector>
            <targetReference>Get_PS_Standard_PDF_template</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PopulateTemplateBundle</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PopulateTempFormula</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Default_template_as_bundle</targetReference>
            </connector>
            <label>PopulateTemplateBundle</label>
        </rules>
    </decisions>
    <decisions>
        <name>Populate_Template_with_standard</name>
        <label>Populate Template with standard</label>
        <locationX>534</locationX>
        <locationY>6143</locationY>
        <defaultConnector>
            <targetReference>iis</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PopulateTemStandard</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PopulateTemplateWithStandardFormula</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Default_template_as_standard</targetReference>
            </connector>
            <label>PopulateTemStandard</label>
        </rules>
    </decisions>
    <decisions>
        <description>merging the condition of flow Quote_Before_Update_Operations</description>
        <name>Quote_RT_is_changes</name>
        <label>Quote RT is changes</label>
        <locationX>534</locationX>
        <locationY>1187</locationY>
        <defaultConnector>
            <targetReference>If_Termination_With_Cancellation_Fee_Checked</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>check_status_for_pending</name>
            <conditionLogic>(1 AND 2) AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Finalize OSA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pricing Proposal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Approved_Quote_record_type</targetReference>
            </connector>
            <label>check  status for pending</label>
        </rules>
        <rules>
            <name>check_status_for_Recalled_rejected</name>
            <conditionLogic>(1 AND (4 OR 6) AND (2 OR 3 OR 5))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recalled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Finalize OSA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending Submission</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pricing Proposal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Draft_Quote_record_type</targetReference>
            </connector>
            <label>check  status for Recalled/rejected</label>
        </rules>
    </decisions>
    <decisions>
        <description>To update the approval status to pending submission when quote stage is changes</description>
        <name>Quote_stage_is_Changes</name>
        <label>Quote stage is Changes</label>
        <locationX>534</locationX>
        <locationY>887</locationY>
        <defaultConnector>
            <targetReference>Quote_RT_is_changes</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_quote_stage1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quote_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Finalize OSA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ApprovalStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_approval_status</targetReference>
            </connector>
            <label>Check quote stage</label>
        </rules>
    </decisions>
    <decisions>
        <name>Roox_pmt_terms</name>
        <label>Roox pmt terms</label>
        <locationX>534</locationX>
        <locationY>4127</locationY>
        <defaultConnector>
            <targetReference>New_page_layout</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FALSE_Roox pmt terms</defaultConnectorLabel>
        <rules>
            <name>TRUE_Roox_pmt_terms</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RooxFormula</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>populate_Roox_pmt_term</targetReference>
            </connector>
            <label>TRUE_Roox pmt terms</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Price_book_rule_field</name>
        <label>Update Price book rule field</label>
        <locationX>534</locationX>
        <locationY>5027</locationY>
        <defaultConnector>
            <targetReference>Populate_new_OSA_if_opportunity_is_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FALSE_Update Price book rule field</defaultConnectorLabel>
        <rules>
            <name>TRUE_Update_Price_book_rule_field</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>formula_TRUE_myRule_28</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Price_book_rule</targetReference>
            </connector>
            <label>TRUE_Update Price book rule field</label>
        </rules>
    </decisions>
    <decisions>
        <name>when_billing_freq_values_are_updated</name>
        <label>when billing freq values are updated</label>
        <locationX>534</locationX>
        <locationY>287</locationY>
        <defaultConnector>
            <targetReference>Check_Quote_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>change_in_software_renewal_billing</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__BillingFrequency__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Renewal_Billing_Frequency__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Software_Payment_Terms__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Renewal_Payment_Terms__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Isnew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ACV_Change_Year_1__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_billing_frequency_level</targetReference>
            </connector>
            <label>change in software/ renewal billing</label>
        </rules>
    </decisions>
    <decisions>
        <name>X094Fxxx_Condion</name>
        <label>094Fxxx_Condion</label>
        <locationX>534</locationX>
        <locationY>7043</locationY>
        <defaultConnector>
            <targetReference>lookup_quote_lines</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>X094Fxxx_con</name>
            <conditionLogic>(1 AND 2) OR (3 AND 4) OR (3 AND 5) OR (1 AND 6)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.License_Basis__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Fee Earners</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>USD</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.License_Basis__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Lawyers</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>EUR</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>GBP</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CurrencyIsoCode</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AUD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>mainUpdate3</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>094Fxxx_con</label>
        </rules>
    </decisions>
    <description>Updated according to BIZ-45105 [ populate the addresses according to accounts on quote ]
and BIZ-47145 [ populate the ramping users field based on YOY Quantity change on Quote ] , BIZ-48120 [Unchecking of Termination with Cancellation Fee checkbox]
RR: modified to update approval status of quote
BIZ-47719.  Added logic to update deal type BIZ-49086
Added a logic to update approval status to pending submission for amend quote when stage is changes to pricing and proposal on amend quotes
refactor code
Added logic for billing level for story created for ticket BIZ-51605</description>
    <environments>Default</environments>
    <formulas>
        <description>Created for story 51605</description>
        <name>Biliingfrequencyformula</name>
        <dataType>Number</dataType>
        <expression>MAX(IF(TEXT({!$Record.SBQQ__BillingFrequency__c})=&quot;Annual&quot;,0,
IF((TEXT({!$Record.SBQQ__BillingFrequency__c})=&quot;Quarterly Y1 Only&quot; || TEXT({!$Record.SBQQ__BillingFrequency__c})=&quot;Semi-annual Y1 Only&quot;),2,8)),IF(TEXT({!$Record.Renewal_Billing_Frequency__c})=&quot;Annual&quot;,0,
IF((TEXT({!$Record.Renewal_Billing_Frequency__c})=&quot;Quarterly Y1 Only&quot; || TEXT({!$Record.Renewal_Billing_Frequency__c})=&quot;Semi-annual Y1 Only&quot;),2,8)))</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>combinedpaymenttermformula</name>
        <dataType>Number</dataType>
        <expression>MAX(IF(TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 30&apos;,0, 
IF(TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 45&apos; &amp;&amp; ({!$Record.ACV_Change_Year_1__c} &gt; 10000),1, 
IF((TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 45&apos;|| TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 60&apos; || TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 90&apos;) &amp;&amp; ({!$Record.ACV_Change_Year_1__c} &lt; 10000),1, 
IF(TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 60&apos; || TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 90&apos;,2,
IF(TEXT({!$Record.Software_Payment_Terms__c}) = &apos;Net 120&apos;,8,0)))
)),
IF(TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 30&apos;,0, 
IF(TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 45&apos; &amp;&amp; ({!$Record.ACV_Change_Year_1__c} &gt; 10000),1, 
IF((TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 45&apos;|| TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 60&apos; || TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 90&apos;) &amp;&amp; ({!$Record.ACV_Change_Year_1__c} &lt; 10000),1, 
IF(TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 60&apos; || TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 90&apos;,2,
IF(TEXT({!$Record.Renewal_Payment_Terms__c}) = &apos;Net 120&apos;,8,0)))
)))</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>Criteria_Rule_090Exxx</name>
        <dataType>Boolean</dataType>
        <expression>AND( {!$Record.SBQQ__Account__r.Pre_9_4_1_Liability_Annex_Executed__c}=False, {!$Record.Annex_email_sent__c} = FALSE, ISBLANK({!$Record.SBQQ__Account__r.Liability_Annex_Contract_Number__c}), NOT( OR( ISPICKVAL({!$Record.SBQQ__Account__r.Liability_Annex_Status__c},&quot;Received&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Liability_Annex_Status__c},&quot;Drafted&quot;),  ISPICKVAL({!$Record.SBQQ__Account__r.Liability_Annex_Status__c},&quot;N/A&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Liability_Annex_Status__c},&quot;Requested&quot;) )), {!$Record.Request_OSA__c}=True,  OR( ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;8.5&quot;),  ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;8.8&quot;),  ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;8.9&quot;),  ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;9.0&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;9.1&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;9.2&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;9.3&quot;), ISPICKVAL({!$Record.SBQQ__Account__r.Contract_Term_Version__c},&quot;9.4&quot;)  ) )</expression>
    </formulas>
    <formulas>
        <name>formula_10_myRule_65_A3_8755989835</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>formula_2_myRule_28_A1_5917703120</name>
        <dataType>String</dataType>
        <expression>{!$Record.SBQQ__PriceBook__r.Name}</expression>
    </formulas>
    <formulas>
        <name>formula_3_myRule_50_A4_0835692455</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>formula_4_myRule_50_A3_9583828099</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>formula_5_myRule_55_A4_7587183781</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>formula_6_myRule_55_A3_3120327323</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>formula_7_myRule_60_A4_9395249152</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>formula_8_myRule_60_A3_4908378614</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>formula_9_myRule_65_A4_6194193996</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>formula_TRUE_myRule_17</name>
        <dataType>Boolean</dataType>
        <expression>AND(ISNEW(),
{!$Record.SBQQ__Opportunity2__r.Bill_to_Account__r.Name =&apos;ROOX&apos;})</expression>
    </formulas>
    <formulas>
        <name>formula_TRUE_myRule_28</name>
        <dataType>Boolean</dataType>
        <expression>OR(
ISNEW(),
ISCHANGED({!$Record.SBQQ__PriceBook__c})
)</expression>
    </formulas>
    <formulas>
        <name>formula_TRUE_myRule_41</name>
        <dataType>Boolean</dataType>
        <expression>AND(ISCHANGED({!$Record.SBQQ__Opportunity2__c }),
NOT(ISNEW()),
NOT(ISBLANK({!$Record.SBQQ__Opportunity2__r.Associated_Contract_OSA__c}))
)</expression>
    </formulas>
    <formulas>
        <name>Isnew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>PopulateTempFormula</name>
        <dataType>Boolean</dataType>
        <expression>AND(
ISCHANGED({!$Record.Bundle_Product_Count__c}),
{!$Record.Bundle_Product_Count__c}  &gt; 0
)</expression>
    </formulas>
    <formulas>
        <name>PopulateTemplateWithStandardFormula</name>
        <dataType>Boolean</dataType>
        <expression>AND(
ISCHANGED({!$Record.Bundle_Product_Count__c}),
{!$Record.Bundle_Product_Count__c}  = 0
)</expression>
    </formulas>
    <formulas>
        <name>QuoteDate</name>
        <dataType>String</dataType>
        <expression>TEXT(DAY(TODAY()))&amp;&quot;-&quot;&amp;
CASE(TEXT(MONTH(TODAY())),
&quot;1&quot;,&quot;Jan&quot;,
&quot;2&quot;,&quot;Feb&quot;,
&quot;3&quot;,&quot;Mar&quot;,
&quot;4&quot;,&quot;Apr&quot;,
&quot;5&quot;,&quot;May&quot;,
&quot;6&quot;,&quot;Jun&quot;,
&quot;7&quot;,&quot;Jul&quot;,
&quot;8&quot;,&quot;Aug&quot;,
&quot;9&quot;,&quot;Sep&quot;,
&quot;10&quot;,&quot;Oct&quot;,
&quot;11&quot;,&quot;Nov&quot;,
&quot;12&quot;,&quot;Dec&quot;,
&quot;Error&quot;
)&amp;&quot;-&quot;&amp;RIGHT(TEXT(YEAR(TODAY())),2)</expression>
    </formulas>
    <formulas>
        <name>RooxFormula</name>
        <dataType>Boolean</dataType>
        <expression>AND(ISNEW(),
{!$Record.SBQQ__Opportunity2__r.Bill_to_Account__r.Name} =&apos;ROOX&apos;)</expression>
    </formulas>
    <formulas>
        <name>VersionChange</name>
        <dataType>Boolean</dataType>
        <expression>OR(
ISNEW(),
ISCHANGED({!$Record.Version__c})
)</expression>
    </formulas>
    <interviewLabel>Quote Before Insert Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Quote Before Insert Update</label>
    <loops>
        <name>collectionofquotelinesloop</name>
        <label>collectionofquotelinesloop</label>
        <locationX>534</locationX>
        <locationY>7451</locationY>
        <collectionReference>collectionofquotlines</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>if_already_collected_value</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>IIS_include</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Approved_Quote_record_type</name>
        <label>Get Approved Quote record type</label>
        <locationX>270</locationX>
        <locationY>1295</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Quote_Record_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Approved_Quote</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Draft_Quote_record_type</name>
        <label>Get Draft Quote record type</label>
        <locationX>534</locationX>
        <locationY>1295</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Quote_Record_Type_to_Draft</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft_Quote</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_PS_Bundle_PDF_template</name>
        <label>Get PS Bundle-PDF template</label>
        <locationX>534</locationX>
        <locationY>5627</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Populate_Template_with_bundle</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PS Bundle-PDF</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__QuoteTemplate__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_PS_Standard_PDF_template</name>
        <label>Get PS Standard-PDF template</label>
        <locationX>534</locationX>
        <locationY>6035</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Populate_Template_with_standard</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PS Standard-PDF</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__QuoteTemplate__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get quote line records of the quote with YOY Quantity Change &gt; 0</description>
        <name>Get_Quote_Lines</name>
        <label>Get Quote Lines</label>
        <locationX>314</locationX>
        <locationY>2519</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_for_updating_Quote</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Quote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>YOY_Quantity_Change__c</field>
            <operator>GreaterThan</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SBQQ__QuoteLine__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the required billing address that needs to be populated in the quote bill to address field.</description>
        <name>Get_Required_Billing_Address</name>
        <label>Get Required Billing Address</label>
        <locationX>402</locationX>
        <locationY>2003</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Required_Shipping_Address</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Bill_To_Account__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Default_Billing_Address__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Address__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the required shipping address that needs to be populated in the quote ship to address field.</description>
        <name>Get_Required_Shipping_Address</name>
        <label>Get Required Shipping Address</label>
        <locationX>402</locationX>
        <locationY>2111</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Addresses_on_Quote</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Ship_To_Account__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Default_Shipping_Address__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Address__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getBillingLookUpData</name>
        <label>getBillingLookUpData</label>
        <locationX>534</locationX>
        <locationY>3011</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>checkBillingLookUPValue</targetReference>
        </connector>
        <filterLogic>(1 AND 2 AND (3 OR 4))</filterLogic>
        <filters>
            <field>SBQQ__Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Bill_To_Address__r.Address__CountryCode__s</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__Category__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExternalId__c</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Yellow</stringValue>
            </value>
        </filters>
        <filters>
            <field>ExternalId__c</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Red</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__LookupData__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getShippingLookUpData</name>
        <label>getShippingLookUpData</label>
        <locationX>534</locationX>
        <locationY>3419</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>checkShippingLookUPValue</targetReference>
        </connector>
        <filterLogic>(1 AND 2 AND (3 OR 4))</filterLogic>
        <filters>
            <field>SBQQ__Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Ship_To_Address__r.Address__CountryCode__s</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__Category__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ExternalId__c</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Yellow</stringValue>
            </value>
        </filters>
        <filters>
            <field>ExternalId__c</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Red</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__LookupData__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>lookup_quote_lines</name>
        <label>lookup quote lines</label>
        <locationX>534</locationX>
        <locationY>7343</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>collectionofquotelinesloop</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Quote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>SBQQ__QuoteLine__c</object>
        <outputReference>collectionofquotlines</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Item_Master_Number__c</queriedFields>
        <queriedFields>Meter_Type__c</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>mainUpdate3</name>
        <label>mainUpdate3</label>
        <locationX>402</locationX>
        <locationY>7151</locationY>
        <connector>
            <targetReference>lookup_quote_lines</targetReference>
        </connector>
        <inputAssignments>
            <field>pricebook_exception__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>408</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>when_billing_freq_values_are_updated</targetReference>
        </connector>
        <object>SBQQ__Quote__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <triggerOrder>20</triggerOrder>
    <variables>
        <name>Collection_of_Meter_Type</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>collectionofallproducts</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>collectionofquotlines</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
    <variables>
        <name>QuoteUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>SBQQ__Quote__c</objectType>
    </variables>
</Flow>
