<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>pse__Create_Change_Request</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Create Change Request</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>// Get the Account Id
var accId  = &apos;{!Account.Id}&apos;;

// The same button is shared at two places 
// 1. Account Details
// 2. Opportunity List View
// In case the call is from Account Details, account Id will be there. We want that account Id to be used in filtering the projects.
// So In case the call is from Opportunity List the Account Id will be NULL
// In that case the request will be sent to Project Lookup Page for creating CR
if (accId == null || accId == &apos;&apos;) {
      window.parent.location = &quot;{!URLFOR(&apos;/apex/CreateCRFromProjectLookup&apos;, &apos;&apos;)}&quot;;
} else {
      window.parent.location = &quot;{!URLFOR(&apos;/apex/CreateCRFromAccountDetails&apos;, &apos;&apos;, [accountId=Account.Id] )}&quot;;
}</url>
</WebLink>
