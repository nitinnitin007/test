<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Budgeted_Hours_validation_check</fullName>
    <active>false</active>
    <errorConditionFormula>AND( 
  ISCHANGED(pse__Stage__c), 
  OR( 
    ISPICKVAL(pse__Stage__c,&quot;Open - Pending Closure (Completed)&quot;), 
    ISPICKVAL(pse__Stage__c,&quot;Open - Pending Closure (Transitioned to Partner)&quot;) 
  ),
  NOT($Profile.Id=&apos;00e30000000bvR3&apos;), 
  NOT($Profile.Id=&apos;00e50000001BeRg&apos;), 
  NOT($User.Id=&apos;00550000001NiJb&apos;), 
  NOT($User.Id=&apos;00550000002ngng&apos;), 
  OR(
    AND (
      ISPICKVAL(Hours_Delta_Reason__c,&quot;Within 10% of budgeted hours&quot;),
      (pse__Planned_Hours__c / Total_Hours__c) &lt; 0.9
    ),
    AND (
      ISPICKVAL(Hours_Delta_Reason__c,&quot;Not relevant (Project was under budget)&quot;),
      pse__Planned_Hours__c &lt; Total_Hours__c
    ),
    AND(
      OR(
        Total_Hours__c &lt; pse__Planned_Hours__c,
        Total_Hours__c = pse__Planned_Hours__c
      ),
      NOT(ISPICKVAL(Hours_Delta_Reason__c,&quot;Not relevant (Project was under budget)&quot;))
    )
  )
)</errorConditionFormula>
    <errorDisplayField>Hours_Delta_Reason__c</errorDisplayField>
    <errorMessage>Your selection for &quot;Reason for exceeding budget hours&quot; does not match the criteria for sold or total hours. Please pick a selection that works given the hours.</errorMessage>
</ValidationRule>
