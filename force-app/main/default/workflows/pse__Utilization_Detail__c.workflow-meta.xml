<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <alerts>
        <fullName>Capacity_Overload_Alert</fullName>
        <ccEmails>sfdc_donotreply@intapp.com</ccEmails>
        <description>Capacity Overload Alert</description>
        <protected>false</protected>
        <recipients>
            <field>Resource_Manager_Email__c</field>
            <type>email</type>
        </recipients>
        <recipients>
            <recipient>carolina.roller@intapp.com</recipient>
            <type>user</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>PSA_Templates/PSA_Capacity_Overload</template>
    </alerts>
    <fieldUpdates>
        <fullName>Set_Resource_Manager_Email</fullName>
        <field>Resource_Manager_Email__c</field>
        <formula>pse__Resource__r.pse__Salesforce_User__r.Manager.Email</formula>
        <name>Set Resource Manager Email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Rule Code%3A UD-001Exxx</fullName>
        <actions>
            <name>Capacity_Overload_Alert</name>
            <type>Alert</type>
        </actions>
        <active>true</active>
        <description>Rule Code: UD-001Exxx
Utilization Overload Alert
Sends an email notification to Carolina and Resource managers</description>
        <formula>AND(
  Capacity__c&gt;=1.5,
  (TODAY()-pse__Historical_End_Date__c)&lt;5,
  NOT(ISBLANK(Resource_Manager_Email__c))
)</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Rule Code%3A UD-002xFxx</fullName>
        <actions>
            <name>Set_Resource_Manager_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Rule Code: UD-002xFxx
Set Resource Manager Email
Populates the Resource Manager Email on the Utilization Detail object</description>
        <formula>TRUE</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
</Workflow>
